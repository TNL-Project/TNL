set( GRID_TESTS Grid1D Grid2D Grid3D  )

foreach( TARGET IN ITEMS ${GRID_TESTS} )
   if (${BUILD_CUDA})
      SET(SUPPORT_FILENAME ${TARGET}.cu)
   else()
      SET(SUPPORT_FILENAME ${TARGET}.cpp)
   endif()

   set(HEADER ${TARGET}.h )
   set(MODULE_NAME tnl-benchmark-${TARGET}-operations )

   if (${BUILD_CUDA})
      CUDA_ADD_EXECUTABLE( ${MODULE_NAME} ${HEADER} ${SUPPORT_FILENAME} OPTIONS ${CUDA_TESTS_FLAGS})
      TARGET_LINK_LIBRARIES( ${MODULE_NAME} ${TESTS_LIBRARIES})
   else()
      ADD_EXECUTABLE( ${MODULE_NAME} ${HEADER} ${SUPPORT_FILENAME})
      TARGET_COMPILE_OPTIONS( ${MODULE_NAME} PRIVATE ${CXX_TESTS_FLAGS})
   endif()

   install( TARGETS ${MODULE_NAME} RUNTIME DESTINATION bin )

endforeach()
