#!/bin/bash
precision="float"
matice="662_bus comsol losmoc msc01050"
loops=2

runTest()
{
   if test ! -d "./results";
   then
	mkdir -p "results"
   fi
   for matrix in ${matice};
   do

	echo ${matrix}.mtx
	./tnl-gem-cuda --input-matrix ${matrix}".mtx" \
			--device GPU \
		        --loops ${loops} \
			--precision ${precision} \
			>> ./results/${matrix}GPU.txt
	./tnl-gem-cuda --input-matrix ${matrix}".mtx" \
			--device GPU \
		        --loops ${loops} \
			--precision ${precision} \
			--pivoting no \
			>> ./results/${matrix}GPU.txt
	./tnl-gem --input-matrix ${matrix}".mtx" \
			--device CPU \
		        --loops ${loops} \
			--precision ${precision} \
			>> ./results/${matrix}CPU.txt
	./tnl-gem --input-matrix ${matrix}".mtx" \
			--device CPU \
		        --loops ${loops} \
			--precision ${precision} \
			--pivoting no \
			>> ./results/${matrix}CPU.txt
   done
}


runTest
