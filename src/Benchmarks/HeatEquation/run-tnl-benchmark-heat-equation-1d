#/bin/bash

#devices="sequential host"
devices="cuda"
precisions="float double"
tests="parallel-for nd-array grid"
min_x_dimension="100"
max_x_dimension="100000"
base="tnl-benchmark-heat-equation"

for device in ${devices}
do
   for precision in ${precisions}
   do
      for test in ${tests}
      do
         command="${base}
            --id ${test}
            --implementation ${test}
            --precision ${precision}
            --dimension 1
            --min-x-dimension ${min_x_dimension}
            --max-x-dimension ${max_x_dimension}
            --max-iterations 500
            --loops 500
            --final-time 0.1
            --device ${device}
            --log-file ${base}-${test}-${device}-${precision}-1d.json
            --output-mode append
            --write-data no"
         echo $command
         $command
      done
   done
done
